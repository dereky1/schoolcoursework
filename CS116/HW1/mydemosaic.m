%derek yang
%63118832

function [J] = mydemosaic(I)
    R = zeros(500,500);
    G = zeros(500,500);
    B = zeros(500,500);
    
    R(1:2:500,1:2:500) = im2double(I(1:2:500,1:2:500));
    G(1:2:500,2:2:500) = im2double(I(1:2:500,2:2:500));
    G(2:2:500,1:2:500) = im2double(I(2:2:500,1:2:500));
    B(2:2:500,2:2:500) = im2double(I(2:2:500,2:2:500));
    
    %R
    %First&2nd to Last Row
    R(1:2:499,2:2:499) = (R(1:2:499,1:2:498) + R(1:2:499,3:2:500))./2;
    %Last Column of R
    R(1:2:500,500) = R(1:2:500,499);
    %Nearest Neighbor
    R(2:2:500,500) = R(1:2:500,499); 
    %Up/Downs
    R(2:2:499,1:2:499) = (R(1:2:497,1:2:499) + R(3:2:499,1:2:499))./2; 
    %Last Row
    R(500,1:2:500) = R(499,1:2:500); 
    R(500,2:2:500) = R(499,1:2:500);
    %Else
    R(2:2:498,2:2:498) = (R(1:2:497,1:2:497) + R(1:2:497,3:2:499) + ...
        R(3:2:499,1:2:497) + R(3:2:499,3:2:499))./4;
    
    %B
    %Last&2nd to First Row
    B(2:2:500,3:2:499) = (B(2:2:500,2:2:498) + B(2:2:500,4:2:500))./2;
    %Last Column of B
    B(2:2:500,1) = B(2:2:500,2);
    %Nearest Neighbor
    B(3:2:499,1) = B(3:2:500,2); 
    %Up/Downs
    B(3:2:499,2:2:500) = (B(2:2:498,2:2:500) + B(4:2:500,2:2:500))./2; 
    %First
    B(1,1:2:500) = B(2,2:2:500); 
    B(1,2:2:500) = B(2,2:2:500);
    %Else
    %size(B(3:2:499,1:2:499))
    B(3:2:499,3:2:499) = (B(2:2:498,2:2:498) + B(2:2:498,4:2:500) + ...
        B(4:2:500,2:2:498) + B(4:2:500,4:2:500))./4;
    
    %G
    %First Rows
    G(1,3:2:499) = (G(1,2:2:498) + G(1,4:2:500))./2;
    %Last Rows
    G(500,2:2:498) = (G(500,1:2:497) + G(500,3:2:499))./2;
    %First Col
    G(3:2:499,1) = (G(2:2:498,1) + G(4:2:500,1))./2;
    %Last Col
    G(2:2:498,500) = (G(1:2:497,500) + G(3:2:499,500))./2; 
    %Corners
    G(1,1) = G(1,2); 
    G(500,500) = G(500,499);
    %Even
    G(2:2:498,2:2:498) = (G(1:2:497,2:2:498) + G(3:2:499,2:2:498) + ...
        G(2:2:498,1:2:497) + G(2:2:498,3:2:500))./4;
    %Odd
    G(3:2:499,3:2:499) = (G(2:2:498,3:2:499) + G(4:2:500,3:2:499) + ...
        G(3:2:499,2:2:498) + G(3:2:499,4:2:500))./4;
  
    J(1:500,1:500,1) = R(1:500,1:500);
    J(1:500,1:500,2) = G(1:500,1:500);
    J(1:500,1:500,3) = B(1:500,1:500);
    imagesc(J);
    imwrite(J,'Demosaicing.jpg','jpg');
    
end
